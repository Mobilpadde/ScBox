/**
 * ScrollBox - Scroll that box!
 * Mads Cordes | Mobilpadde@gmail.com | http://githut.com/Mobilpadde | http://twitter.com/Mobilpadde
 * @author Mads Cordes
 * @version 0.0.1
**/
(function(a){a.fn.scBox=function(b){a.fn.scBox.defaults={start:40,width:200,height:50,step:10,fontSize:15,textColor:"#fff",bgColor:"#000",slideColor:"#ff0000"};var c=a.extend({},a.fn.scBox.defaults,b);console.log(c),a.each(this,function(b,d){function f(){var a=Math.round(e*100/(c.width>=c.height?c.width:c.height));a<0?a=0:a>100&&(a=100),ctx.fillStyle=c.textColor,ctx.font="bold "+c.fontSize+"px sans-serif",ctx.textAlign="right",ctx.textBaseline="bottom",ctx.fillText(a+"%",c.width-3,c.height)}var e=c.start;return canvas=a("<canvas width="+c.width+" height="+c.height+"></canvas>").appendTo(d),ctx=canvas[0].getContext("2d"),c.width>=c.height?(ctx.fillStyle=c.bgColor,ctx.fillRect(0,0,c.width,c.height),ctx.fillStyle=c.slideColor,ctx.fillRect(0,0,e,c.height),f(),a(canvas[0]).bind("mousewheel DOMMouseScroll",function(a){return ctx.clearRect(0,0,c.width,c.height),ctx.fillStyle=c.bgColor,ctx.fillRect(0,0,c.width,c.height),ctx.fillStyle=c.slideColor,a.originalEvent.wheelDeltaY>0||a.originalEvent.detail>0?(e<c.width?e+=c.step:c.width,ctx.fillRect(0,0,e,c.height),f()):(e>0?e-=c.step:0,ctx.fillRect(0,0,e,c.height),f()),!1}),a(canvas[0]).click(function(a){e=a.offsetX,ctx.clearRect(0,0,c.width,c.height),ctx.fillStyle=c.bgColor,ctx.fillRect(0,0,c.width,c.height),ctx.fillStyle=c.slideColor,ctx.fillRect(0,0,e,c.height),f()})):(ctx.fillStyle=c.slideColor,ctx.fillRect(0,0,c.width,c.height),ctx.fillStyle=c.bgColor,ctx.fillRect(0,0,c.height,c.height-e),f(),a(canvas[0]).bind("mousewheel DOMMouseScroll",function(a){return ctx.clearRect(0,0,c.width,c.height),ctx.fillStyle=c.slideColor,ctx.fillRect(0,0,c.width,c.height),ctx.fillStyle=c.bgColor,a.originalEvent.wheelDeltaY>0||a.originalEvent.detail>0?(e<c.height?e+=c.step:c.height,ctx.fillRect(0,0,c.height,c.height-e),f()):(e>0?e-=c.step:0,ctx.fillRect(0,0,c.height,c.height-e),f()),!1}),a(canvas[0]).click(function(a){e=c.height-a.offsetY,ctx.clearRect(0,0,c.width,c.height),ctx.fillStyle=c.slideColor,ctx.fillRect(0,0,c.width,c.height),ctx.fillStyle=c.bgColor,ctx.fillRect(0,0,c.height,c.height-e),f()})),d})}})(jQuery)